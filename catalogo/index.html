<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dise침os El Mictl치n</title>
  <link rel="icon" href="images/Brief/logo.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="animations.css">
  <style>
    :root {
      --bg: #1b1a1a;
      --card: #46433e;
      --text: #ffffff;
      --muted: #9aa4b2;
      --primary: #a0c21f;
      --accent: #a0c21f;
      --danger: #ef4444;
      --border: #a0c21f
    }
    * { box-sizing: border-box }
    html {
      height: 100%;
      scroll-behavior: smooth;
      scroll-padding-top: 80px; /* Offset for sticky navbar */
    }
    
    /* Offset for catalog anchor to ensure toolbar is visible */
    #catalogo {
      scroll-margin-top: 120px;
    }
    
    body {
      margin: 0;
      min-height: 100%;
      position: relative;
      background: var(--bg);
      color: var(--text);
      font-family: 'Poppins', sans-serif;
      line-height: 1.35;
      font-weight: 400;
    }
    a { color: inherit; text-decoration: none }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px;
    }
    .header {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      align-items: end;
      margin-bottom: 16px;
    }
    .title, h1, h2, h3, .nav-brand, .name, .price {
      font-weight: 600;
    }
    .title {
      font-size: 28px;
      font-weight: 700;
      letter-spacing: 0.2px;
    }
    .subtitle {
      font-size: 14px;
      color: var(--muted);
    }
    .toolbar {
      display: grid;
      grid-template-columns: 1fr 170px;
      gap: 12px;
      margin-top: 8px;
    }
    .input, .select {
      width: 100%;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
      outline: none;
    }
    .input:focus, .select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(59,130,246,.15);
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
      margin-top: 20px;
    }
    
    /* Animation for smooth filtering */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .grid.fade-in {
      animation: fadeIn 0.4s ease-out forwards;
    }
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .card:hover {
      border-color: #2c3340;
    }
    .image {
      aspect-ratio: 1 / 1;
      width: 100%;
      background: #0b0e13;
      display: grid;
      place-items: center;
      overflow: hidden;
    }
    .image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .content {
      padding: 14px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      flex-grow: 1;
    }
    .name {
      font-size: 16px;
      font-weight: 600;
    }
    .desc {
      font-size: 13px;
      color: var(--muted);
      min-height: 40px;
    }
    .meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 6px;
    }
    .price {
      font-weight: 700;
      color: var(--accent);
      font-size: 15px;
    }
    .badge-container {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }
    .badge {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 6px;
      border: 1px solid var(--border);
      color: var(--muted);
      background: rgba(255, 255, 255, 0.03);
      white-space: nowrap;
    }
    .badge.more {
      background: var(--border);
      color: var(--text);
      font-weight: 600;
    }
    .actions {
      margin-top: auto;
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
    }
    .btn {
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--card);
      color: var(--text);
      cursor: pointer;
    }
    .btn:hover { border-color: #2c3340 }
    .btn.primary {
      background: #a0c21f;
      border-color: #a0c21f;
      color: #0f1216;
      font-weight: 600;
    }
    .btn.primary:hover {
      background: #8eaf1b;
      border-color: #8eaf1b;
    }
    .footer {
      margin: 40px 0 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      font-size: 13px;
      color: var(--muted);
      border-top: 1px dashed var(--border);
      padding-top: 16px;
    }
    .contact {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .contact a {
      color: var(--text);
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--card);
    }
    @media (max-width: 560px) {
      .toolbar { grid-template-columns: 1fr }
      .footer { flex-direction: column; align-items: flex-start }
      .nav-links { gap: 16px; font-size: 13px; }
      .nav-container { overflow-x: auto; padding-bottom: 4px; }
    }
    
    /* Carousel Styles */
    .carousel {
      position: relative;
      width: 100%;
      height: 300px;
      overflow: hidden;
      border-radius: 12px;
      margin: 24px 0;
      border: 1px solid var(--border);
    }
    .carousel-inner {
      display: flex;
      width: 100%;
      height: 100%;
    }
    .carousel-item {
      min-width: 100%;
      height: 100%;
      position: relative;
      flex-shrink: 0;
    }
    .carousel-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .carousel-caption {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
      padding: 40px 24px 24px;
      color: white;
    }
    .carousel-indicators {
      position: absolute;
      bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      z-index: 2;
    }
    .indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255,255,255,0.5);
      cursor: pointer;
    }
    .indicator.active {
      background: var(--primary);
    }
    /* Maps & Schedule */
    .locations {
      margin: 40px 0;
      padding: 24px;
      background: var(--card);
      border-radius: 12px;
      border: 1px solid var(--border);
    }
    .maps-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }
    .map-wrapper {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .map-title {
      font-weight: 600;
      color: var(--primary);
    }
    .map-frame {
      width: 100%;
      height: 250px;
      border-radius: 8px;
      border: 0;
      background: #222;
    }
    .schedule {
      text-align: center;
      padding-top: 24px;
      border-top: 1px solid var(--border);
    }
    .schedule h3 { margin-top: 0; color: var(--primary); font-size: 18px; margin-bottom: 12px; }
    .schedule-item { color: var(--muted); margin: 6px 0; font-size: 14px; }

    /* Social Media */
    .social-links {
      display: flex;
      gap: 16px;
      justify-content: center;
      margin-top: 24px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
      width: 100%;
    }
    .social-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--card);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text);
      font-size: 20px;
    }
    .social-btn:hover {
      background: var(--primary);
      color: #000;
      box-shadow: 0 5px 15px rgba(160, 194, 31, 0.2);
    }
    
    /* Navbar Styles */
    .navbar {
        position: sticky;
        top: 0;
        z-index: 1000;
      background: rgba(15, 18, 22, 0.95);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid var(--border);
      margin-bottom: 24px;
    }
    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 60px;
    }
    .nav-brand {
      font-weight: 700;
      font-size: 20px;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .nav-links {
      display: flex;
      gap: 24px;
      list-style: none;
      margin: 0;
      padding: 0;
      white-space: nowrap;
    }
    .nav-links a {
      font-size: 14px;
      font-weight: 500;
      color: var(--muted);
      padding: 8px 0;
      border-bottom: 2px solid transparent;
    }
    .nav-links a:hover, .nav-links a.active {
      color: var(--primary);
    }
    .nav-links a:hover {
      border-bottom-color: var(--primary);
    }
    
    /* Lists Grid with Animation */
    .lists-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin: 32px 0;
    }
    .list-image {
      width: 100%;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      border: 1px solid var(--border);
      opacity: 0;
      transform: translateY(30px);
    }
    
    .list-image:hover {
      cursor: pointer;
    }

    /* Lightbox */
    .lightbox {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      opacity: 0;
    }
    .lightbox.active {
      display: flex;
      opacity: 1;
    }
    .lightbox-content {
      position: relative;
      max-width: 90%;
      max-height: 90vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .lightbox img {
      max-width: 100%;
      max-height: 90vh;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }
    .lightbox-close {
      position: absolute;
      top: 20px;
      right: 20px;
      color: white;
      font-size: 35px;
      cursor: pointer;
      z-index: 2001;
      line-height: 1;
    }
    .lightbox-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      color: white;
      font-size: 40px;
      cursor: pointer;
      padding: 16px;
      z-index: 2001;
      user-select: none;
      transition: opacity 0.2s;
    }
    .lightbox-nav:hover {
      color: var(--primary);
    }
    .lightbox-prev { left: 20px; }
    .lightbox-next { right: 20px; }

    /* Background Decoration */
    #bg-decoration {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
      overflow: hidden;
    }
    .deco-item {
      position: absolute;
      opacity: 0.08;
    }
    /* Sticky Toolbar Styles Removed */
  </style>
</head>
<body>
  <div id="bg-decoration"></div>
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-brand">
        <img src="images/Brief/logo.png" alt="Logo" style="height: 32px; width: auto;">
        Dise침os El Mictl치n
      </div>
      <ul class="nav-links">
        <li><a href="#" class="active">Inicio</a></li>
        <li><a href="#quienes-somos">Qui칠nes Somos</a></li>
        <li><a href="#catalogo" id="nav-catalogo">Cat치logo</a></li>
        <li><a href="#catalogo" id="nav-promo">Promociones</a></li>
        <li><a href="#contactanos">Cont치ctanos</a></li>
      </ul>
    </div>
  </nav>

  <div class="container" id="inicio">
    <div class="header">
      <div class="title" style="display: flex; align-items: center; gap: 12px;">
        <img src="images/Brief/logo.png" alt="Logo" style="height: 80px; width: auto;">
        Dise침os El Mictl치n
      </div>
      <div class="subtitle">Productos Promocionales y dise침o a un super precio!</div>
      
      <div class="carousel" id="promociones-banner" style="display: none;">
        <div class="carousel-inner" id="carousel-track">
          <!-- Dynamic Slides -->
        </div>
        <div class="carousel-indicators" id="carousel-dots">
          <!-- Dynamic Dots -->
        </div>
      </div>

      <div id="quienes-somos" style="margin: 32px 0; padding: 24px; background: var(--card); border-radius: 12px; border: 1px solid var(--border);">
        <h2 style="margin-top: 0; font-size: 20px;">Qui칠nes Somos</h2>
        <p style="color: var(--muted); margin-bottom: 0;">
          Somos una imprenta dedicada a ofrecer la mejor calidad en dise침o e impresi칩n. 
          En Dise침os El Mictl치n, transformamos tus ideas en realidad con materiales de primera y acabados profesionales.
        </p>
      </div>

      <!-- Lists Images -->
      <div class="lists-grid">
        <img src="images/listas/lista hoodies1.jpg" alt="Lista Hoodies" class="list-image">
        <img src="images/listas/lista impresion digital.jpg" alt="Lista Impresi칩n Digital" class="list-image">
        <img src="images/listas/lista playeras1.jpg" alt="Lista Playeras" class="list-image">
        <img src="images/listas/lista vasos.jpg" alt="Lista Vasos" class="list-image">
      </div>

      <div class="toolbar" id="catalogo">
        <input id="search" class="input" type="search" placeholder="Buscar producto por nombre">
        <select id="category" class="select">
          <option value="todas">Todas las categor칤as</option>
          <option value="papeleria">Papeler칤a</option>
          <option value="promocion">Promoci칩n</option>
          <option value="gran-formato">Gran formato</option>
          <option value="sellos">Sellos</option>
          <option value="sublimables">Sublimables</option>
          <option value="textiles">Textiles</option>
          <option value="Serigrafia">Serigrafia</option>
        </select>
      </div>
    </div>

    <div class="grid" id="grid">
      <div class="card" data-name="Tarjetas de presentaci칩n" data-category="papeleria">
        <div class="image">
          <img src="images/productos/tarjetas.jpg" alt="Tarjetas de presentaci칩n">
        </div>
        <div class="content">
          <div class="name">Tarjetas de presentaci칩n</div>
          <div class="desc">Papel Sulfatado de 14 pt con cara frontal barnizado UV.</div>
          <div class="meta">
            <div class="price">Desde $260.00</div>
            <div class="badge-container">
              <div class="badge">Papeler칤a</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Tarjetas%20de%20presentaci%C3%B3n">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Volantes" data-category="papeleria">
        <div class="image">
          <img src="images/productos/flyer.jpg" alt="Flyers publicitarios">
        </div>
        <div class="content">
          <div class="name">Volantes</div>
          <div class="desc">Impresi칩n a color en couch칠 150g, tama침os A5/A6, opci칩n de barniz UV.</div>
          <div class="meta">
            <div class="price">Desde $260.00</div>
            <div class="badge-container">
              <div class="badge">Papeler칤a</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Flyers">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Brochures" data-category="papeleria">
        <div class="image">
          <img src="images/productos/Brochures.jpg" alt="Brochures tr칤pticos">
        </div>
        <div class="content">
          <div class="name">Brochures</div>
          <div class="desc">D칤ptico/tr칤ptico en couch칠 130 a 350g, impresi칩n a doble cara, plegado profesional.</div>
          <div class="meta">
            <div class="price">Desde $40.00</div>
            <div class="badge-container">
              <div class="badge">Papeler칤a</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Brochures">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Posters" data-category="papeleria">
        <div class="image">
          <img src="images/productos/poster.jpg" alt="Posters">
        </div>
        <div class="content">
          <div class="name">Posters</div>
          <div class="desc">Tintas de alta fidelidad, tama침os personalizados, papeles couch칠, opalina y sulfatada.</div>
          <div class="meta">
            <div class="price">Desde $40.00</div>
            <div class="badge-container">
              <div class="badge">Papeler칤a</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Posters">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Etiquetas adhesivas" data-category="papeleria">
        <div class="image">
          <img src="images/productos/sticker.jpg" alt="Etiquetas adhesivas">
        </div>
        <div class="content">
          <div class="name">Etiquetas adhesivas</div>
          <div class="desc">Vinil adhesivo troquelado, acabados mate/brillante, apto para interior/exterior.</div>
          <div class="meta">
            <div class="price">Desde $5.00</div>
            <div class="badge-container">
              <div class="badge">Papeler칤a</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Etiquetas%20adhesivas">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Calendarios" data-category="papeleria">
        <div class="image">
          <img src="images/productos/calendario.png" alt="Calendarios corporativos" onerror="this.src='https://images.unsplash.com/photo-1512716072675-38c9a74ae5ea?q=80&w=1200&auto=format&fit=crop'">
        </div>
        <div class="content">
          <div class="name">Calendarios</div>
          <div class="desc">De pared o escritorio, impresi칩n a color, espiral met치lico o engrapado.</div>
          <div class="meta">
            <div class="price">Desde $15.00</div>
            <div class="badge-container">
              <div class="badge">Papeler칤a</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Calendarios">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="folders impresos" data-category="papeleria Serigrafia">
        <div class="image">
          <img src="images/productos/folder.jpg" alt="folders impresos" onerror="this.src=''">
        </div>
        <div class="content">
          <div class="name">folders impresos</div>
          <div class="desc">Impresi칩n offset o serigrafia.</div>
          <div class="meta">
            <div class="price">Desde $20.00</div>
            <div class="badge-container">
              <div class="badge">Papeler칤a</div>
              <div class="badge">Serigrafia</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20folders%20impresos">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Sellos personalizados" data-category="sellos">
        <div class="image">
          <img src="images/productos/sellos.jpg" alt="Sellos personalizados" onerror="this.src='https://images.unsplash.com/photo-1551836022-4b74a0684ea0?q=80&w=1200&auto=format&fit=crop'">
        </div>
        <div class="content">
          <div class="name">Sellos personalizados</div>
          <div class="desc">Autoentintables, varios tama침os, tinta negra/azul/roja, reemplazo de almohadilla.</div>
          <div class="meta">
            <div class="price">Desde $400.00</div>
            <div class="badge-container">
              <div class="badge">Sellos</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Sellos%20personalizados">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Lonas" data-category="gran-formato">
        <div class="image">
          <img src="images/productos/lona.jpg" alt="Lonas publicitarias">
        </div>
        <div class="content">
          <div class="name">Lonas</div>
          <div class="desc">Impresi칩n en lona 13oz, ojillos met치licos, resistencia a exterior, tama침os a medida.</div>
          <div class="meta">
            <div class="price">Desde $129.00/m</div>
            <div class="badge-container">
              <div class="badge">Gran formato</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Lonas">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Vinil adhesivo" data-category="gran-formato">
        <div class="image">
          <img src="images/productos/vinil.jpg" alt="Vinil adhesivo">
        </div>
        <div class="content">
          <div class="name">Vinil adhesivo</div>
          <div class="desc">Vinil de corte o impresi칩n digital, laminado, apto para vidrios, paredes y veh칤culos.</div>
          <div class="meta">
            <div class="price">Desde $250/m</div>
            <div class="badge-container">
              <div class="badge">Gran formato</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Vinil%20adhesivo">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Libretas" data-category="papeleria">
        <div class="image">
          <img src="https://images.unsplash.com/photo-1514029322149-5bfb2b7230c1?q=80&w=1200&auto=format&fit=crop" alt="Libretas">
        </div>
        <div class="content">
          <div class="name">Libretas</div>
          <div class="desc">Tama침o A5/A6, interiores a una tinta, portada personalizada, encuadernado con espiral.</div>
          <div class="meta">
            <div class="price">Desde $329</div>
            <div class="badge-container">
              <div class="badge">Papeler칤a</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Libretas">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Banners retractiles" data-category="gran-formato">
        <div class="image">
          <img src="images/productos/banner.jpg" alt="Banners retractiles">
        </div>
        <div class="content">
          <div class="name">Banners retr치ctiles</div>
          <div class="desc">Estructura de aluminio, impresi칩n en lona o PET, funda de transporte incluida.</div>
          <div class="meta">
            <div class="price">Desde $2000.00</div>
            <div class="badge-container">
              <div class="badge">Gran formato</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Banners%20retr%C3%A1ctiles">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Tazas personalizadas" data-category="promocion sublimables">
        <div class="image">
          <img src="images/productos/taza.jpg" alt="Tazas personalizadas">
        </div>
        <div class="content">
          <div class="name">Tazas personalizadas</div>
          <div class="desc">Cer치mica de alta calidad, impresi칩n por sublimaci칩n, resistente a microondas.</div>
          <div class="meta">
            <div class="price">Desde $65.00</div>
            <div class="badge-container">
              <div class="badge">Promoci칩n</div>
              <div class="badge">Sublimables</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Tazas">Solicitar</a>
          </div>
        </div>
      </div>

      
      <div class="card" data-name="Taza M치gica" data-category="sublimables">
        <div class="image">
          <img src="images/productos/taza2.jpg" alt="Taza M치gica">
        </div>
        <div class="content">
          <div class="name">Taza M치gica</div>
          <div class="desc">Taza de 11oz, 춰cambia de color con el calor!.</div>
          <div class="meta">
            <div class="price">Desde $130.00</div>
            <div class="badge-container">
              <div class="badge">sublimables</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Taza%20M치gica">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Playeras" data-category="promocion sublimables textiles">
        <div class="image">
          <img src="images/productos/playera.jpg" alt="Playeras">
        </div>
        <div class="content">
          <div class="name">Playeras</div>
          <div class="desc">Algod칩n 100% o poli칠ster, serigraf칤a, vinil textil o sublimaci칩n.</div>
          <div class="meta">
            <div class="price">Desde $200.00</div>
            <div class="badge-container">
              <div class="badge">Promoci칩n</div>
              <div class="badge">Sublimables</div>
              <div class="badge">Textiles</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Playeras">Solicitar</a>
          </div>
        </div>
      </div>

      <div class="card" data-name="Sudaderas" data-category="promocion textiles">
        <div class="image">
          <img src="images/productos/sudadera.jpg" alt="Sudaderas">
        </div>
        <div class="content">
          <div class="name">Sudaderas</div>
          <div class="desc">Felpa suave, impresi칩n duradera, varios colores y tallas disponibles.</div>
          <div class="meta">
            <div class="price">Desde $370.00</div>
            <div class="badge-container">
              <div class="badge">Promoci칩n</div>
              <div class="badge">Textiles</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn">Detalles</button>
            <a class="btn primary" href="mailto:mictlan.design.mx@gmail.com?subject=Solicitud%20Sudaderas">Solicitar</a>
          </div>
        </div>
      </div>
    </div>

    <div class="locations" id="ubicacion">
      <h2 style="margin-top: 0; margin-bottom: 24px; font-size: 20px;">Nuestras Sucursales</h2>
      <div class="maps-grid">
        <div class="map-wrapper">
          <div class="map-title">Sucursal Villas de San Martin</div>
          <iframe class="map-frame" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d470.79825672028164!2d-98.83554830103235!3d19.265570791250695!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85ce21d984c73817%3A0xc6de54d213f7b3c!2zRGlzZcOxb3MgRWwgTWljdGzDoW4!5e0!3m2!1ses-419!2smx!4v1770169258325!5m2!1ses-419!2smx" allowfullscreen="" loading="lazy"></iframe>
        </div>
        <div class="map-wrapper">
          <div class="map-title">Sucursal Iztapalapa</div>
          <iframe class="map-frame" src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d470.47652767530974!2d-99.0350307!3d19.3772818!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d1fd3d64bd6685%3A0xc92d525a308e9bdb!2sIlhuicamina%2024%2C%20El%20Para%C3%ADso%2C%20Iztapalapa%2C%2009230%20Ciudad%20de%20M%C3%A9xico%2C%20CDMX!5e0!3m2!1ses-419!2smx!4v1770169033347!5m2!1ses-419!2smx" allowfullscreen="" loading="lazy"></iframe>
        </div>
      </div>
      
      <div class="schedule">
        <h3>游 Horario de Atenci칩n</h3>
        <div class="schedule-item">Lunes a Viernes y Domingo: 9:00 am - 6:00 pm</div>
        <div class="schedule-item">S치bado: 10:00 am - 3:00 pm</div>
      </div>
    </div>

    <div class="footer" id="contactanos">
      <div>Precios orientativos, sujetos a especificaciones y cantidad.</div>
      <div class="contact">
        <span>Contacto:</span>
        <a href="mailto:mictlan.design.mx@gmail.com">mictlan.design.mx@gmail.com</a>
        <a href="tel:+525579857309">+52 55 7985 7309</a>
      </div>
    </div>
    
    <div class="social-links">
      <a href="https://www.facebook.com/el.mictlan.design" target="_blank" class="social-btn" title="Facebook">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
      </a>
      <a href="https://www.instagram.com/mictlan.design/" target="_blank" class="social-btn" title="Instagram">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
      </a>
      <a href="https://w.app/disenos-el-mictlan" target="_blank" class="social-btn" title="WhatsApp">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
      </a>
    </div>
  </div>

  <div id="lightbox" class="lightbox">
    <span class="lightbox-close">&times;</span>
    <div class="lightbox-nav lightbox-prev">&#10094;</div>
    <div class="lightbox-content">
      <img id="lightbox-img" src="" alt="Full Screen Image">
    </div>
    <div class="lightbox-nav lightbox-next">&#10095;</div>
  </div>

  <script>
    const searchInput = document.getElementById('search');
    const categorySelect = document.getElementById('category');
    const cards = Array.from(document.querySelectorAll('.card'));
    function n(s) { return s.toLowerCase().normalize('NFD').replace(/\p{Diacritic}/gu, '') }
    
    let filterTimeout;
    let unlockTimeout;
    
    function applyFilter(evt) {
      // Prevent automatic scrolling by maintaining scroll position
      const scrollPos = window.scrollY;
      const shouldRestore = evt !== false;
      const grid = document.getElementById('grid');
      
      // Remove animation class to reset it
      grid.classList.remove('fade-in');
      
      // Hide grid temporarily
      grid.style.opacity = '0';
      // Fix height to prevent layout shift causing scroll jump
      grid.style.minHeight = grid.offsetHeight + 'px';
      
      clearTimeout(filterTimeout);
      filterTimeout = setTimeout(() => {
        const term = n(searchInput.value || '');
        const cat = categorySelect.value;
        
        cards.forEach(c => {
          const name = n(c.dataset.name || '');
          const categories = (c.dataset.category || '').split(' ');
          const matchesSearch = term.length === 0 || name.includes(term);
          const matchesCategory = cat === 'todas' || categories.includes(cat);
          
          c.style.display = matchesSearch && matchesCategory ? '' : 'none';
        });
        
        // Restore opacity and animate
        grid.style.opacity = '1';
        grid.style.minHeight = ''; // Remove fixed height
        grid.classList.add('fade-in');
        
        // Force restore scroll position immediately if requested
        if (shouldRestore) {
          window.scrollTo(0, scrollPos);
        }
        
      }, 150); 
    }
    searchInput.addEventListener('input', applyFilter);
    categorySelect.addEventListener('change', applyFilter);
    
    // Dynamic Carousel Logic
    function initCarousel() {
      const promoCards = Array.from(document.querySelectorAll('.card')).filter(c => 
        (c.dataset.category || '').includes('promocion')
      );
      
      const banner = document.getElementById('promociones-banner');
      const track = document.getElementById('carousel-track');
      const dotsContainer = document.getElementById('carousel-dots');
      
      if (promoCards.length === 0) return;
      
      banner.style.display = 'block';
      track.innerHTML = '';
      dotsContainer.innerHTML = '';
      
      promoCards.forEach((card, index) => {
        const img = card.querySelector('img').src;
        const name = card.dataset.name;
        const price = card.querySelector('.price').textContent;
        const desc = card.querySelector('.desc').textContent;
        
        // Slide
        const slide = document.createElement('div');
        slide.className = 'carousel-item';
        slide.innerHTML = `
          <img src="${img}" alt="${name}">
          <div class="carousel-caption">
            <h3>${name}</h3>
            <p>${desc} - ${price}</p>
          </div>
        `;
        track.appendChild(slide);
        
        // Dot
        const dot = document.createElement('div');
        dot.className = `indicator ${index === 0 ? 'active' : ''}`;
        dot.onclick = () => setSlide(index);
        dotsContainer.appendChild(dot);
      });
      
      startAutoSlide(promoCards.length);
    }
    
    let currentSlide = 0;
    let slideInterval;
    
    function showSlide(n, total) {
      const track = document.getElementById('carousel-track');
      const dots = document.querySelectorAll('.indicator');
      
      currentSlide = (n + total) % total;
      
      track.style.transform = `translateX(-${currentSlide * 100}%)`;
      
      dots.forEach(d => d.classList.remove('active'));
      if(dots[currentSlide]) dots[currentSlide].classList.add('active');
    }
    
    function startAutoSlide(total) {
      if (slideInterval) clearInterval(slideInterval);
      slideInterval = setInterval(() => {
        showSlide(currentSlide + 1, total);
      }, 5000);
    }
    
    function setSlide(n) {
      const total = document.querySelectorAll('.carousel-item').length;
      showSlide(n, total);
      startAutoSlide(total);
    }

    document.addEventListener('DOMContentLoaded', () => {
      applyFilter();
      initCarousel();
      
      // Scroll Reveal Logic
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          // Toggle visibility based on intersection
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          } else {
            // Don't hide the toolbar (search bar) once it's visible to prevent it from disappearing while in use
            if (!entry.target.classList.contains('toolbar')) {
              entry.target.classList.remove('visible');
            }
          }
        });
      }, { threshold: 0.1 });
      
      // Auto-add animation class to major sections
      const animatedSelectors = [
        '.header', 
        '.carousel', 
        '#quienes-somos', 
        '.lists-grid', 
        // '.toolbar',  // Removed toolbar from scroll animation
        '.card', 
        '.locations', 
        '.footer',
        '.social-links'
      ];
      
      document.querySelectorAll(animatedSelectors.join(',')).forEach(el => {
        el.classList.add('scroll-animate');
        observer.observe(el);
      });
      
      // Keep existing logic for specific list images if they aren't covered above
      // But .lists-grid is covered, so the whole grid animates. 
      // If we want individual images to cascade, we can target them instead.
      // Let's target .list-image specifically as well for that nice effect
      document.querySelectorAll('.list-image').forEach(el => {
        el.classList.add('scroll-animate');
        observer.observe(el);
      });
      
      // Lightbox Logic
      const lightbox = document.getElementById('lightbox');
      const lightboxImg = document.getElementById('lightbox-img');
      const closeBtn = document.querySelector('.lightbox-close');
      const prevBtn = document.querySelector('.lightbox-prev');
      const nextBtn = document.querySelector('.lightbox-next');
      
      const listImages = Array.from(document.querySelectorAll('.list-image'));
      let currentLightboxIndex = 0;

      function openLightbox(index) {
        currentLightboxIndex = index;
        updateLightboxImage();
        lightbox.classList.add('active');
      }

      let transitionTimeout;

      function updateLightboxImage(direction) {
        const container = document.querySelector('.lightbox-content');
        
        // Handle rapid clicks (spamming):
        // If there's an active transition timeout, cancel it and force-finish the previous state
        if (transitionTimeout) {
            clearTimeout(transitionTimeout);
            transitionTimeout = null;
        }

        const existingImages = container.querySelectorAll('img');
        // If we have multiple images (transition in progress), clean up
        if (existingImages.length > 1) {
            // Remove all except the last one (which was the entering one)
            for (let i = 0; i < existingImages.length - 1; i++) {
                existingImages[i].remove();
            }
            // Stabilize the survivor
            const survivor = existingImages[existingImages.length - 1];
            survivor.className = ''; 
            survivor.id = 'lightbox-img';
        }

        const oldImg = container.querySelector('img');
        const newSrc = listImages[currentLightboxIndex].src;
        
        // If no direction (opening), just set src
        if (!direction) {
            if (oldImg) {
               oldImg.src = newSrc;
               oldImg.className = '';
               oldImg.id = 'lightbox-img';
            } else {
                const img = document.createElement('img');
                img.src = newSrc;
                img.id = 'lightbox-img';
                container.appendChild(img);
            }
            return;
        }

        const newImg = document.createElement('img');
        newImg.src = newSrc;
        
        if (direction === 'next') {
            newImg.classList.add('anim-next-in');
            if(oldImg) oldImg.classList.add('anim-next-out');
        } else {
            newImg.classList.add('anim-prev-in');
            if(oldImg) oldImg.classList.add('anim-prev-out');
        }
        
        container.appendChild(newImg);
        
        // Cleanup after animation
        transitionTimeout = setTimeout(() => {
            if(oldImg) oldImg.remove();
            newImg.classList.remove('anim-next-in', 'anim-prev-in');
            newImg.id = 'lightbox-img';
            transitionTimeout = null;
        }, 500); 
      }

      function nextImage(e) {
        if(e) e.stopPropagation();
        currentLightboxIndex = (currentLightboxIndex + 1) % listImages.length;
        updateLightboxImage('next');
      }

      function prevImage(e) {
        if(e) e.stopPropagation();
        currentLightboxIndex = (currentLightboxIndex - 1 + listImages.length) % listImages.length;
        updateLightboxImage('prev');
      }

      listImages.forEach((img, index) => {
        img.addEventListener('click', () => openLightbox(index));
      });

      closeBtn.addEventListener('click', () => {
        lightbox.classList.remove('active');
      });
      
      prevBtn.addEventListener('click', prevImage);
      nextBtn.addEventListener('click', nextImage);

      lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox || e.target.classList.contains('lightbox-content')) {
          lightbox.classList.remove('active');
          const img = lightbox.querySelector('img.zoomed');
          if (img) {
            img.classList.remove('zoomed', 'panning');
            img.style.transform = '';
          }
        } else if (e.target.tagName === 'IMG' && e.target.closest('.lightbox-content')) {
          e.target.classList.toggle('zoomed');
          if (!e.target.classList.contains('zoomed')) {
            e.target.classList.remove('panning');
            e.target.style.transform = '';
          } else {
             // Optional: Set initial pan based on click position?
             // For smooth entry, let CSS handle center zoom, then mousemove takes over.
          }
        }
      });
      
      // Pan on Mousemove
      lightbox.addEventListener('mousemove', (e) => {
        const img = lightbox.querySelector('img.zoomed');
        if (!img) return;
        
        // Add panning class to disable transition for smooth movement
        if (!img.classList.contains('panning')) {
             requestAnimationFrame(() => img.classList.add('panning'));
        }
        
        // Calculate dynamic limits based on image size vs viewport
        const zoomFactor = 1.5;
        const rect = img.getBoundingClientRect();
        
        // We use offsetWidth/Height for the base size (untransformed conceptually in terms of box model before render transform, 
        // but getBoundingClientRect gives the transformed size).
        // Let's use the element's reported offset dimensions which are unscaled by the transform property itself usually,
        // but since we are scaling via CSS transform, offsetWidth is the unscaled width.
        const zoomedWidth = img.offsetWidth * zoomFactor;
        const zoomedHeight = img.offsetHeight * zoomFactor;
        
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        
        // Max translation allowed (positive value)
        // If image is smaller than viewport, limit is 0 (keep centered)
        const limitX = Math.max(0, (zoomedWidth - viewportWidth) / 2);
        const limitY = Math.max(0, (zoomedHeight - viewportHeight) / 2);
        
        // Calculate percentages (-1 to 1)
        const mouseXRel = (e.clientX / viewportWidth - 0.5) * 2;
        const mouseYRel = (e.clientY / viewportHeight - 0.5) * 2;
        
        // Target translation: opposite to mouse movement to "pan"
        // If mouse is left (-1), we want to see left side, so we move image RIGHT (+)
        const x = -mouseXRel * limitX;
        const y = -mouseYRel * limitY;
        
        img.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px)) scale(${zoomFactor})`;
      });
      
      // Keyboard Navigation
      document.addEventListener('keydown', (e) => {
        if (!lightbox.classList.contains('active')) return;
        
        if (e.key === 'Escape') lightbox.classList.remove('active');
        if (e.key === 'ArrowLeft') prevImage();
        if (e.key === 'ArrowRight') nextImage();
      });

      // Background Deco Logic
      const decoImages = [
        'circulo1.png', 'circulo2.png', 'circulo2_1.png', 'feliz.png',
        'mas1.png', 'mas2.png', 'ondas.png'
      ];

      function initBackgroundDeco() {
        const container = document.getElementById('bg-decoration');
        const numItems = 25; // Reducido para evitar saturaci칩n con im치genes m치s grandes
        const placedItems = [];

        // Limpiar contenedor previo si existe
        container.innerHTML = '';

        let attempts = 0;
        const maxAttempts = 1000;

        for(let i=0; i<numItems; i++) {
          let overlap = true;
          let safeAttempts = 0;
          let size, x, y;

          while(overlap && safeAttempts < 50) {
              size = Math.random() * 100 + 80; // 80px to 180px (M치s grandes)
              // Ajustar l칤mites para que no se salgan (0 a 100% menos el tama침o relativo aproximado)
              // Asumimos un ancho de pantalla promedio para c치lculo porcentual aproximado
              x = Math.random() * 90; 
              y = Math.random() * 95; // Un poco m치s de altura permitida
              
              // Chequear colisi칩n simple
              overlap = false;
              for (const item of placedItems) {
                  // Distancia euclidiana simple en % (ajuste aproximado, considerando ratio de aspecto)
                  const dx = item.x - x;
                  const dy = item.y - y;
                  const distance = Math.sqrt(dx*dx + dy*dy);
                  
                  // Umbral de distancia (si est치n a menos de 10% de distancia, asumimos solape)
                  if (distance < 12) { 
                      overlap = true;
                      break;
                  }
              }
              safeAttempts++;
          }

          if (safeAttempts >= 50) continue; // Si no encuentra sitio, saltar este item

          placedItems.push({x, y});

          const img = document.createElement('img');
          const randomImg = decoImages[Math.floor(Math.random() * decoImages.length)];
          img.src = `images/deco/${randomImg}`;
          img.className = 'deco-item';
          img.onerror = function() { this.remove(); }; 
          
          const rotate = Math.random() * 360;
          
          img.style.width = `${size}px`;
          img.style.left = `${x}%`;
          img.style.top = `${y}%`;
          img.style.transform = `rotate(${rotate}deg)`;
          
          container.appendChild(img);
        }
      }
      // Nav Click Handler
      function handleNavClick(e, category) {
        e.preventDefault();
        categorySelect.value = category;
        applyFilter(false);
        
        const section = document.getElementById('catalogo');
        // Calculate target position manually to match scroll-margin-top: 120px
        // logic without relying on scrollIntoView which can be jittery
        const offset = 120; 
        const elementPosition = section.getBoundingClientRect().top + window.scrollY;
        const targetPosition = elementPosition - offset;
        
        const currentScroll = window.scrollY;
        
        // If we are already close (within 10px), snap instantly to avoid "jump" animation
        // Otherwise scroll smoothly
        if (Math.abs(currentScroll - targetPosition) < 10) {
           window.scrollTo({ top: targetPosition, behavior: 'auto' });
        } else {
           window.scrollTo({ top: targetPosition, behavior: 'smooth' });
        }
      }

      // Nav Catalogo Click Logic
      const catalogoLink = document.getElementById('nav-catalogo');
      if (catalogoLink) {
        catalogoLink.addEventListener('click', (e) => handleNavClick(e, 'todas'));
      }

      // Nav Promociones Click Logic
      const promoLink = document.getElementById('nav-promo');
      if (promoLink) {
        promoLink.addEventListener('click', (e) => handleNavClick(e, 'promocion'));
      }

      initBackgroundDeco();
    });
  </script>
</body>
</html>
